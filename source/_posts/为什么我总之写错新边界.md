---
title: 为什么我总之写错新边界
cwd: /home/amano-sei/hexo/myblog
date: 2020-12-10 14:47:19
tags:
- 思考
- 划分树
---

其实以前就老是写错的...不过画图就能相对有一定准确性地写出了（但是速度不佳...尝试给加减找通用意义，但是两侧是完全不同的。

一侧的加是因为在后面，另一侧的加是因为要在前面。

本来因为这个原因我没仔细观察，仔细观察后，发觉是可以分别公式化两侧的内容的。

设数组`toleft[l...r]`，中间任意一点`x`，`l-1+toleft[x]-toleft[l-1]`表示到x为止在左边的最后一个数的下标，`x+toleft[r]-toleft[x]`表示到x为止在右边的最后一个数的下标。

我们有时候需要某区间的第一个，而最后一个和第一个是相对的，前面的最后一个加一就是后面的第一个。

大概这样（说的很乱，其实只是把博客当成小黄鸭了...

